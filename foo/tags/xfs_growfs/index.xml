<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Xfs_growfs on ICT pages</title>
    <link>https://example.org/tags/xfs_growfs/</link>
    <description>Recent content in Xfs_growfs on ICT pages</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 07 Jul 2020 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://example.org/tags/xfs_growfs/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>CentOS Cryptsetup luks / dm_crypt</title>
      <link>https://example.org/ict/centos-cryptsetup-luks/</link>
      <pubDate>Tue, 07 Jul 2020 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/centos-cryptsetup-luks/</guid>
      <description>&lt;p&gt;Preparation:&lt;/p&gt;&#xA;&lt;pre&gt;yum -y install cryptsetup&#xA;&#xA;modprobe dm_crypt&#xA;(enables crypt)&#xA;&#xA;lsmod |grep dm_crypt&#xA;dm_crypt               27346  0&#xA;dm_mod                124461  11 dm_log-dm_mirror-dm_crypt&#xA;(checks crypt enabling)&#xA;&lt;/pre&gt;&#xA;&lt;p&gt;Cryptsetup:&lt;/p&gt;&#xA;&lt;pre&gt;pvcreate /dev/sdb&#xA;    Physical volume &#34;/dev/sdb&#34; successfully created.&#xA;&#xA;vgextend centos /dev/sdb&#xA;    Volume group &#34;system&#34; successfully extended&#xA;&#xA;lvcreate -n lv_encrypted -L 10G system&#xA;    Logical volume &#34;lv_encrypted&#34; created.&lt;/pre&gt;&#xA;&lt;p&gt;Cryptdevice:&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;cryptsetup luksFormat /dev/system/lv_encrypted&#xA;&#xA;cryptsetup luksOpen /dev/system/lv_encrypted encrypted&#xA;    &#xA;mkfs.xfs /dev/mapper/encrypted&#xA;    &#xA;mkdir /encrypted&#xA;    &#xA;mount /dev/mapper/encrypted /encrypted&#xA;    &#xA;# lsblk&#xA;NAME                    MAJ:MIN RM  SIZE RO TYPE  MOUNTPOINT&#xA;sda                       8:0    0   10G  0 disk&#xA;├─sda1                    8:1    0  512M  0 part  /boot&#xA;└─sda2                    8:2    0  9.5G  0 part&#xA;    ├─system-root         253:0    0  7.5G  0 lvm   /&#xA;    ├─system-swap         253:1    0    2G  0 lvm   [SWAP]&#xA;    └─system-lv_encrypted 253:2    0   10G  0 lvm&#xA;    └─encrypted         253:3    0   10G  0 crypt /encrypted&#xA;sdb                       8:16   0   10G  0 disk&#xA;└─system-lv_encrypted   253:2    0   10G  0 lvm&#xA;    └─encrypted           253:3    0   10G  0 crypt /encrypted&#xA;sr0      &#xA;&lt;/pre&gt;&#xA;&lt;p&gt;Increase encrypted device:&lt;br&gt;&#xA;(close &amp;amp; unmount before)&lt;/p&gt;</description>
    </item>
    <item>
      <title>Filesystem operations (rescan- create- resize- xfs)</title>
      <link>https://example.org/ict/centos-filesystem-operations/</link>
      <pubDate>Thu, 02 Jul 2020 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/centos-filesystem-operations/</guid>
      <description>&lt;h3 id=&#34;disksh3&#34;&gt;Disks&lt;/h3&gt;&lt;/h3&gt;&#xA;&lt;p&gt;Rescan existing disks:&lt;/p&gt;&#xA;&lt;pre&gt;echo 1 &gt; /sys/class/scsi_device/1\:0\:1\:0/device/rescan&lt;/pre&gt;&#xA;&lt;p&gt;Check new disk:&lt;/p&gt;&#xA;&lt;pre&gt;fdisk -l /dev/sdb&lt;/pre&gt;&#xA;&lt;h1 id=&#34;quick-new-disk&#34;&gt;Quick new disk&lt;/h1&gt;&#xA;&lt;h2 id=&#34;create-new-disk-of-physical-volume-if-you-see-it-with-fdisk--l&#34;&gt;Create new disk of physical volume if you see it with &amp;lsquo;fdisk -l&amp;rsquo;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;pvcreate /dev/sdb&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Extend existing volume group with new disk&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;vgextend rl /dev/sdb&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Extend existing logical volume to the max&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;lvextend -l +100%FREE /dev/rl/root&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Grow existing files system&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;xfs_growfs /dev/rl/root&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h3&gt;Volumes&lt;/h3&gt;&#xA;&lt;p&gt;Physical / Logical Volumes&lt;/p&gt;&#xA;Create physical volume&#xA;&lt;pre&gt;pvcreate /dev/sda3&#xA;    Physical volume &#34;/dev/sda3&#34; successfully created.&lt;/pre&gt;&#xA;Resize physical volume (e.g. extended in VMware)   &#xA;&lt;pre&gt;pvresize /dev/sdb&lt;/pre&gt;&#xA;&lt;pre&gt;pvdisplay&lt;/pre&gt;&#xA;Extend physical volume group &#xA;&lt;pre&gt;vgextend centos /dev/sda3&#xA;    Volume group &#34;centos&#34; successfully extended​&lt;/pre&gt;&#xA;&lt;pre&gt;vgdisplay&lt;/pre&gt;&#xA;Extend logical volume&lt;br&gt;&#xA;in G&#39;igs&#xA;&lt;pre&gt;lvextend -L +8G /dev/system/volume&lt;/pre&gt;&#xA;or full (using everything)&#xA;&lt;pre&gt;lvextend -l 100%FREE /dev/mapper/volume&lt;/pre&gt;&#xA;Grow filesystem&#xA;&lt;pre&gt;xfs_growfs /dev/system/volume&lt;/pre&gt;&#xA;Create new logical volume&#xA;&lt;pre&gt;mkfs.xfs /dev/centos/volume&lt;/pre&gt;&#xA;see: &lt;a href=&#34;centos-new-partition-on-existing-disk.html&#34;&gt;CentOS New Partition on existing disk&lt;/a&gt;</description>
    </item>
  </channel>
</rss>
