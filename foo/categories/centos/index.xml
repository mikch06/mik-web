<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Centos on ICT pages</title>
    <link>https://example.org/categories/centos/</link>
    <description>Recent content in Centos on ICT pages</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 07 Jul 2020 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://example.org/categories/centos/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>CentOS Cryptsetup luks / dm_crypt</title>
      <link>https://example.org/ict/centos-cryptsetup-luks/</link>
      <pubDate>Tue, 07 Jul 2020 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/centos-cryptsetup-luks/</guid>
      <description>&lt;p&gt;Preparation:&lt;/p&gt;&#xA;&lt;pre&gt;yum -y install cryptsetup&#xA;&#xA;modprobe dm_crypt&#xA;(enables crypt)&#xA;&#xA;lsmod |grep dm_crypt&#xA;dm_crypt               27346  0&#xA;dm_mod                124461  11 dm_log-dm_mirror-dm_crypt&#xA;(checks crypt enabling)&#xA;&lt;/pre&gt;&#xA;&lt;p&gt;Cryptsetup:&lt;/p&gt;&#xA;&lt;pre&gt;pvcreate /dev/sdb&#xA;    Physical volume &#34;/dev/sdb&#34; successfully created.&#xA;&#xA;vgextend centos /dev/sdb&#xA;    Volume group &#34;system&#34; successfully extended&#xA;&#xA;lvcreate -n lv_encrypted -L 10G system&#xA;    Logical volume &#34;lv_encrypted&#34; created.&lt;/pre&gt;&#xA;&lt;p&gt;Cryptdevice:&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;cryptsetup luksFormat /dev/system/lv_encrypted&#xA;&#xA;cryptsetup luksOpen /dev/system/lv_encrypted encrypted&#xA;    &#xA;mkfs.xfs /dev/mapper/encrypted&#xA;    &#xA;mkdir /encrypted&#xA;    &#xA;mount /dev/mapper/encrypted /encrypted&#xA;    &#xA;# lsblk&#xA;NAME                    MAJ:MIN RM  SIZE RO TYPE  MOUNTPOINT&#xA;sda                       8:0    0   10G  0 disk&#xA;├─sda1                    8:1    0  512M  0 part  /boot&#xA;└─sda2                    8:2    0  9.5G  0 part&#xA;    ├─system-root         253:0    0  7.5G  0 lvm   /&#xA;    ├─system-swap         253:1    0    2G  0 lvm   [SWAP]&#xA;    └─system-lv_encrypted 253:2    0   10G  0 lvm&#xA;    └─encrypted         253:3    0   10G  0 crypt /encrypted&#xA;sdb                       8:16   0   10G  0 disk&#xA;└─system-lv_encrypted   253:2    0   10G  0 lvm&#xA;    └─encrypted           253:3    0   10G  0 crypt /encrypted&#xA;sr0      &#xA;&lt;/pre&gt;&#xA;&lt;p&gt;Increase encrypted device:&lt;br&gt;&#xA;(close &amp;amp; unmount before)&lt;/p&gt;</description>
    </item>
    <item>
      <title>Filesystem operations (rescan- create- resize- xfs)</title>
      <link>https://example.org/ict/centos-filesystem-operations/</link>
      <pubDate>Thu, 02 Jul 2020 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/centos-filesystem-operations/</guid>
      <description>&lt;h3 id=&#34;disksh3&#34;&gt;Disks&lt;/h3&gt;&lt;/h3&gt;&#xA;&lt;p&gt;Rescan existing disks:&lt;/p&gt;&#xA;&lt;pre&gt;echo 1 &gt; /sys/class/scsi_device/1\:0\:1\:0/device/rescan&lt;/pre&gt;&#xA;&lt;p&gt;Check new disk:&lt;/p&gt;&#xA;&lt;pre&gt;fdisk -l /dev/sdb&lt;/pre&gt;&#xA;&lt;h1 id=&#34;quick-new-disk&#34;&gt;Quick new disk&lt;/h1&gt;&#xA;&lt;h2 id=&#34;create-new-disk-of-physical-volume-if-you-see-it-with-fdisk--l&#34;&gt;Create new disk of physical volume if you see it with &amp;lsquo;fdisk -l&amp;rsquo;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;pvcreate /dev/sdb&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Extend existing volume group with new disk&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;vgextend rl /dev/sdb&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Extend existing logical volume to the max&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;lvextend -l +100%FREE /dev/rl/root&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Grow existing files system&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;xfs_growfs /dev/rl/root&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h3&gt;Volumes&lt;/h3&gt;&#xA;&lt;p&gt;Physical / Logical Volumes&lt;/p&gt;&#xA;Create physical volume&#xA;&lt;pre&gt;pvcreate /dev/sda3&#xA;    Physical volume &#34;/dev/sda3&#34; successfully created.&lt;/pre&gt;&#xA;Resize physical volume (e.g. extended in VMware)   &#xA;&lt;pre&gt;pvresize /dev/sdb&lt;/pre&gt;&#xA;&lt;pre&gt;pvdisplay&lt;/pre&gt;&#xA;Extend physical volume group &#xA;&lt;pre&gt;vgextend centos /dev/sda3&#xA;    Volume group &#34;centos&#34; successfully extended​&lt;/pre&gt;&#xA;&lt;pre&gt;vgdisplay&lt;/pre&gt;&#xA;Extend logical volume&lt;br&gt;&#xA;in G&#39;igs&#xA;&lt;pre&gt;lvextend -L +8G /dev/system/volume&lt;/pre&gt;&#xA;or full (using everything)&#xA;&lt;pre&gt;lvextend -l 100%FREE /dev/mapper/volume&lt;/pre&gt;&#xA;Grow filesystem&#xA;&lt;pre&gt;xfs_growfs /dev/system/volume&lt;/pre&gt;&#xA;Create new logical volume&#xA;&lt;pre&gt;mkfs.xfs /dev/centos/volume&lt;/pre&gt;&#xA;see: &lt;a href=&#34;centos-new-partition-on-existing-disk.html&#34;&gt;CentOS New Partition on existing disk&lt;/a&gt;</description>
    </item>
    <item>
      <title>Remove old kernels</title>
      <link>https://example.org/ict/centos-remove-old-kernels/</link>
      <pubDate>Tue, 24 Mar 2020 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/centos-remove-old-kernels/</guid>
      <description>&lt;p&gt;Current running kernel&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;uname -an&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Show installed kernels:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;rpm -q kernel&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;&lt;b&gt;CentOS 7:&lt;/b&gt;&#xA;Remove old kernels with package-cleanup (yum-utils required)&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;package-cleanup --oldkernels package-cleanup --oldkernels --count=2&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;&lt;b&gt;CentOS 8:&lt;/b&gt; Remove old kernels with dnf&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;dnf remove --oldinstallonly&#xA;dnf remove --oldinstallonly --setopt installonly_limit=2&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>CentOS Postfix Configuration</title>
      <link>https://example.org/ict/centos-postfix-configuration/</link>
      <pubDate>Sat, 22 Apr 2017 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/centos-postfix-configuration/</guid>
      <description>&lt;p&gt;Scenario: Homeserver should send e-mails by your ISP-hosted domain:&lt;/p&gt;&#xA;&lt;p&gt;Packages:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;yum -y install postfix&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Edit the following lines in the postfix main config:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;/etc/postfix/main.cf&#xA;&#xA;mydomain = &amp;quot;MY-DOMAIN&amp;quot;&#xA;myorigin = $myhostname&#xA;myorigin = $mydomain&#xA;inet_interfaces = all&#xA;inet_interfaces = localhost&#xA;inet_protocols = ipv4&#xA;mydestination = $myhostname- localhost.$mydomain- localhost&#xA;mynetworks_style = host&#xA;relayhost = &amp;lt;STMP.HOST.ADDRESS&amp;gt;:&amp;lt;PORT&amp;gt;&#xA;smtpd_sasl_auth_enable = yes&#xA;smtpd_sasl_path = smtpd&#xA;smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd&#xA;smtp_sasl_type = cyrus&#xA;smtp_sasl_auth_enable = yes&#xA;smtp_sasl_security_options = noanonymous&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>Disable root login</title>
      <link>https://example.org/ict/centos-disable-root-login/</link>
      <pubDate>Wed, 23 Dec 2015 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/centos-disable-root-login/</guid>
      <description>&lt;pre&gt;&lt;code&gt;vi /etc/ssh/sshd_config&#xA;PermitRootLogin no&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>Configure static IP address</title>
      <link>https://example.org/ict/centos-configure-static-ip-address/</link>
      <pubDate>Wed, 09 Sep 2015 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/centos-configure-static-ip-address/</guid>
      <description>&lt;p&gt;Position of the interface configuration files:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;/etc/sysconfig/network-scripts&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;ip addr&lt;/p&gt;&#xA;&lt;p&gt;shows the names of available interfaces:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;enp0s3: &amp;lt;BROADCAST-MULTICAST-UP-LOWER_UP&amp;gt; mtu 1500 qdisc&#xA;pfifo_fast state UP qlen 1000&#xA;link/ether 08:00:27:66:c7:99 brd ff:ff:ff:ff:ff:ff&#xA;inet 192.168.0.40/24 brd 192.168.0.255 scope global enp0s3&#xA;valid_lft forever preferred_lft forever&#xA;inet6 fe80::a00:27ff:fe66:c799/64 scope link&#xA;valid_lft forever preferred_lft forever&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Now the config file ifcfg-enp0s3 can be edited with the static config:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;TYPE=&amp;quot;Ethernet&amp;quot;&#xA;NAME=&amp;quot;enp0s3&amp;quot;&#xA;ONBOOT=&amp;quot;yes&amp;quot;&#xA;IPADDR=&amp;quot;192.168.0.40&amp;quot;  &#xA;BOOTPROTO=&amp;quot;static&amp;quot; &#xA;GATEWAY=&amp;quot;192.168.0.1&amp;quot;&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>status / set-locale</title>
      <link>https://example.org/ict/centos-locale-status/</link>
      <pubDate>Wed, 09 Sep 2015 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/centos-locale-status/</guid>
      <description>&lt;p&gt;Show and edit locale status on CentOS:&lt;/p&gt;&#xA;&lt;p&gt;Show locale status:&lt;/p&gt;&#xA;&lt;pre&gt;[root@host]# localectl status&#xA;System Locale: LANG=de_DE.UTF-8&#xA;VC Keymap: sg&#xA;X11 Layout: ch&#xA;Show all possible locaels:&#xA;localectl list-locales&#xA;&lt;/pre&gt;&#xA;&lt;p&gt;Setzen der neuen locale:&lt;/p&gt;&#xA;&lt;pre&gt;localectl set-locale LANG=&#34;locale name&#34;&#xA;locale&lt;/pre&gt;</description>
    </item>
    <item>
      <title>Change hostname</title>
      <link>https://example.org/ict/centos-hostname/</link>
      <pubDate>Tue, 08 Sep 2015 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/centos-hostname/</guid>
      <description>&lt;p&gt;With CentOS7 Release hostnames must be changed by &amp;lsquo;hostnamectl&amp;rsquo;:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;hostnamectl set-hostname &amp;quot;New Hostname&amp;quot;&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>Mount nfs share</title>
      <link>https://example.org/ict/centos-mount-nfs-share/</link>
      <pubDate>Mon, 07 Sep 2015 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/centos-mount-nfs-share/</guid>
      <description>&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Setup NFS Client:&lt;/p&gt;&#xA;&lt;p&gt;yum -y install nfs-utils&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Create mountpoint:&lt;/p&gt;&#xA;&lt;p&gt;mkdir -p /mnt/nfs/example-share&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;Mount NFS share:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;mount &amp;lt;HOST&amp;gt;:/example-share /mnt/nfs/example-share&#xA;hint: –&amp;gt; df -h&#xA;hint: –&amp;gt; mount – show all mounts&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;ol start=&#34;3&#34;&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Add mount to fstab for remounting after reboot:&lt;/p&gt;&#xA;&lt;p&gt;vi /etc/fstab &lt;HOST&gt;:/example-share /mnt/nfs/&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
    <item>
      <title></title>
      <link>https://example.org/ict/mk-test/</link>
      <pubDate>Fri, 03 Dec 2010 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/mk-test/</guid>
      <description>&lt;h1 id=&#34;centos-linux-fail2ban&#34;&gt;CentOS Linux fail2ban&lt;/h1&gt;&#xA;&lt;p&gt;On exposed systems to the internet fail2ban is used to avoid attacks e.g. on ssh deamon.&#xA;This shows the install and config on the CentOS 7.2 release with using firewalld (preinstalled).&#xA;First install fail2ban from repo:&lt;/p&gt;&#xA;&lt;pre&gt;yum -y install fail2ban&lt;/pre&gt;&#xA;&lt;p&gt;For own settings the main config ‘jail.conf’ could be copied.&lt;/p&gt;&#xA;&lt;pre&gt;cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local&lt;/pre&gt;&#xA;&lt;p&gt;Now you can edit ‘jail.local’ with your own fonfigurations.&lt;/p&gt;&#xA;&lt;pre&gt;[sshd] #--&gt; uncommend to activate fail2ban for sshd&#xA;enabled = true #--&gt; use firewalld not iptables&#xA;ignoreip = 192.168.2.0 #--&gt; fail2ban ignores these ip&#39;s&#xA;destemail =  e-mail@address.ch #--&gt; fail2ban sends ban informations to this address&#xA;sendername = Fail2Ban - hostname #--&gt; hostinfos in e-mail&#xA;usedns = no #--&gt; don&#39;t resolve dns names&lt;/pre&gt;&#xA;&lt;p&gt;Now you can enable and start the fail2ban deamon:&lt;/p&gt;</description>
    </item>
    <item>
      <title>CentOS Linux fail2ban</title>
      <link>https://example.org/ict/centos-fail2ban/</link>
      <pubDate>Fri, 03 Dec 2010 00:00:00 +0000</pubDate>
      <guid>https://example.org/ict/centos-fail2ban/</guid>
      <description>&lt;p&gt;On exposed systems to the internet fail2ban is used to avoid attacks e.g. on ssh deamon.&#xA;This shows the install and config on the CentOS 7.2 release with using firewalld (preinstalled).&#xA;First install fail2ban from repo:&lt;/p&gt;&#xA;&lt;pre&gt;yum -y install fail2ban&lt;/pre&gt;&#xA;&lt;p&gt;For own settings the main config ‘jail.conf’ could be copied.&lt;/p&gt;&#xA;&lt;pre&gt;cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local&lt;/pre&gt;&#xA;&lt;p&gt;Now you can edit ‘jail.local’ with your own fonfigurations.&lt;/p&gt;&#xA;&lt;pre&gt;[sshd] #--&gt; uncommend to activate fail2ban for sshd&#xA;enabled = true #--&gt; use firewalld not iptables&#xA;ignoreip = 192.168.2.0 #--&gt; fail2ban ignores these ip&#39;s&#xA;destemail =  e-mail@address.ch #--&gt; fail2ban sends ban informations to this address&#xA;sendername = Fail2Ban - hostname #--&gt; hostinfos in e-mail&#xA;usedns = no #--&gt; don&#39;t resolve dns names&lt;/pre&gt;&#xA;&lt;p&gt;Now you can enable and start the fail2ban deamon:&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
